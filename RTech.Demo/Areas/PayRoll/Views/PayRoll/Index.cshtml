@{
    ViewBag.Title = "Index";
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Layout_Adminlte.cshtml";
}
<style type="text/css">
    fieldset {
        border: 1px solid silver;
        border-radius: 5px;
        padding: 13px;
    }

        fieldset legend {
            color: black;
            padding: 5px 10px;
            font-size: 15px;
            border-radius: 3px;
            box-shadow: 0 0 0 1px silver;
            margin-left: 0px;
            background-color: #ECF0F5;
            /*background-color: #00A65A;*/
        }

    legend {
        display: block;
        width: 100%;
        padding: 0;
        margin-bottom: 0px;
        font-size: 21px;
        line-height: inherit;
        color: #333;
        border: 0;
        border-bottom: 1px solid #e5e5e5;
    }

    fieldset {
        border: 1px solid silver;
        border-radius: 5px;
        padding: 5px;
    }

    .box-footer {
        border-top: none;
    }

    input[type="checkbox"] {
        margin: 5px;
        padding: 0;
    }

    .modal-custom-lg {
        width: 1100px;
    }
</style>
<section class="content-header">
    <h1>
        PayRoll
        <sup class="text-green">Setup</sup>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> PayRoll</a></li>
        <li class="active">PayRoll Setup</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <div class="modal" id="payRollCreationModel">
        <div class="modal-dialog modal-custom-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <header data-bind="with:SelectedEmployee">
                        <div class="col-lg-10">
                            <div class="col-lg-12 form-group">
                                <h4 class="text-green" data-bind="text:'Payroll For '+EmployeeName()"></h4>
                            </div>
                            <div class="col-lg-4 form-group">
                                <label class="col-lg-5 control-label" for="Number">PF No.</label>
                                <div class="col-lg-7">
                                    <span class="">-</span>
                                </div>
                            </div>
                            <div class="col-lg-4 form-group">
                                <label class="col-lg-5 control-label" for="Number">CIT No.</label>
                                <div class="col-lg-7">
                                    <span class="">-</span>
                                </div>
                            </div>
                            <div class="col-lg-4 form-group">
                                <label class="col-lg-5 control-label" for="Number">PAN No.</label>
                                <div class="col-lg-7">
                                    <span class="">-</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-offset-10 form-group">
                            <img class="img-rounded " style="cursor:pointer" width="100" height="90" data-bind="attr: {src:PhotoURL() || '/Images/men3.png'}" />
                        </div>
                    </header>
                </div>
                <div class="modal-body">
                    <ul id="tabList" class="nav nav-tabs">
                        <li class="active"><a href="#payroll" data-toggle="tab">@T("Salary")</a></li>
                        <li><a href="#allowance" data-toggle="tab" data-bind="click:$root.GetEmpAllowance">@T("Allowance")</a></li>
                        <li><a href="#deduction" data-toggle="tab" data-bind="click:$root.GetEmpDeduction">@T("Deduction")</a></li>
                        <li><a href="#insurance" data-toggle="tab">@T("Insurance")</a></li>
                        <li><a href="#gradeGroup" data-toggle="tab" data-bind="click:$root.GetEmpGradeUpgrade">@T("GradeGroup")</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        <div class="tab-pane fade active in" id="payroll">
                            <br />
                            <div class="col-lg-12">

                                <div class="row">
                                    <div class="col-lg-6" data-bind="with:PayRoll">
                                        <div class="col-lg-12 form-group">
                                            <label class="col-lg-4 control-label" for="Number">Effected Form </label>
                                            <div class="col-lg-4">
                                                @*<input type="text" data-date-format="yyyy/MM/dd" class="form-control" data-mask="" data-bind="value:EffectedFrom,mask:'date'">*@
                                                <input type="text" class="form-control" data-nepdate="#effectedFromDate" data-bind="mask:'date',value:EffectedFrom,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedFrom" type="text" id="salaryEffectedFromDate" data-bind="dateNp:{engDate:EffectedFrom},visible:DateVisibility('ne')">
                                            </div>
                                        </div>
                                        <div class="col-lg-12 form-group">
                                            <label class="col-lg-4 control-label" for="Number">Basic Salary</label>
                                            <div class="col-lg-8 ">
                                                <div class="input-group">
                                                    <input type="text" class="form-control text-right" data-bind="value:BasicSalary,mask:'amount'">
                                                    <div class="input-group-btn">
                                                        <select class="dropdown-toggle form-control" style="width:80px;" required data-bind="options:$root.SalaryPaidPer,
                                                                                                optionsText:'Name',optionsValue:'Id',value:SalaryPaidPer
                                                                                                "></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 form-group">
                                            <label class="col-lg-4 control-label" for="Number">Payment By</label>
                                            <div class="col-lg-8">
                                                <select class="form-control" required data-bind="options:$root.PaymentBy,
                                                                                                optionsText:'Name',optionsValue:'Id',value:PaymentBy
                                                                                                "></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6" data-bind="with:PayRoll">
                                        <div class="col-lg-12 form-group">
                                            <label class="col-lg-5 control-label" for="Number">Ot Rate Per Hour</label>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" data-bind="value:OtRatePerHour" />
                                            </div>
                                        </div>
                                        @*<div class="col-lg-12 form-group">
                                                <label class="col-lg-5 control-label" for="Number">Providend Fund(%)</label>
                                                <div class="col-lg-4">
                                                    <input type="text" class="form-control" data-bind="value:PFRate" />
                                                </div>
                                            </div>*@
                                        <div class="col-lg-12 form-group">
                                            <label class="col-lg-5 control-label" for="Number">CIT Rate(%)</label>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" data-bind="value:CITRate" />
                                            </div>
                                        </div>
                                        <div class="col-lg-12 form-group">
                                            @*<label class="col-lg-5 control-label" for="Number">TDS(%)</label>*@
                                            @*<div class="col-lg-7 ">
            <div class="input-group">
                <input type="text" class="form-control" aria-label="..." data-bind="value:TDS">
                <div class="input-group-btn">
                    <select class="dropdown-toggle form-control" style="width:100px;" required data-bind="options:$root.TdsPaidBy,
                                                            optionsText:'Name',optionsValue:'Id',value:TdsPaidBy
                                                            "></select>
                </div>
            </div>
        </div>*@
                                            <label class="col-lg-5 control-label" for="Number">SSF Effective Date</label>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" data-nepdate="#SSFEffectiveDate" data-bind="mask:'date',value:SSFEffectedFromDate,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedFrom" type="text" id="SSFEffectiveDate" data-bind="dateNp:{engDate:SSFEffectedFromDate},visible:DateVisibility('ne')">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- ko with: PayRoll -->
                                    <div class="col-lg-6">
                                        <fieldset class="col-lg-12" data-bind="enable:EnableLateDeduction">
                                            <legend>Enable Late Deduction<input type="checkbox" data-bind="checked:EnableLateDeduction"></legend>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Grace Days")</label>
                                                <div class="col-lg-6">
                                                    <input type="text" class="form-control" data-bind="value:LateGraceDay" />
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Deduction By")</label>
                                                <div class="col-lg-6">
                                                    <select class="form-control" data-bind="options:$root.LateDeductionBy,
                                optionsValue:'Id',optionsText:'Name',value:LateDeductionBy"></select>
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Rate")</label>
                                                <div class="col-lg-6">
                                                    <input type="text" class="form-control" data-bind="value:LateDeductionRate" />
                                                </div>
                                            </div>

                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset class="col-lg-12" data-bind="enable:EnableEarlyDeduction">
                                            <legend>Enable Early Deduction<input type="checkbox" data-bind="checked:EnableEarlyDeduction"></legend>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Grace Days")</label>
                                                <div class="col-lg-6">
                                                    <input type="text" class="form-control" data-bind="value:EarlyGraceDay" />
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Deduction By")</label>
                                                <div class="col-lg-6">
                                                    <select class="form-control" data-bind="options:$root.EarlyDeductionBy,
                                optionsValue:'Id',optionsText:'Name',value:EarlyDeductionBy"></select>
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-4 control-label" for="Number">@T("Rate")</label>
                                                <div class="col-lg-6">
                                                    <input type="text" class="form-control" data-bind="value:EarlyDeductionRate" />
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <!-- /ko -->
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-lg-12 text-center">
                                        <input type="submit" name="Save" class="btn bg-green" value="Save" data-bind="click:$root.CreateUpdate,value:$root.ModeOfButton,actionVisibility:'7210'" />
                                        <input type="button" name="Reset" value="Reset" class="btn bg-black" data-bind="click:$root.Reset" />
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                                        <thead class="success bg-success">
                                            <tr>
                                                <th>S No</th>
                                                <th>From</th>
                                                <th>To</th>
                                                <th>Basic Salary(Rs)</th>
                                                <th>OT Rate(Rs)</th>
                                                <th>PF</th>
                                                <th>TDS</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach:PayRolls">
                                            <tr>
                                                <td data-bind="text:$index()+1"></td>
                                                <td data-bind="text:SuitableDate(EffectedFrom())"></td>
                                                <td data-bind="text:SuitableDate(EndDate())"></td>
                                                <td data-bind="text:BasicSalary"></td>
                                                <td data-bind="text:OtRatePerHour"></td>
                                                <td data-bind="text:PFRate"></td>
                                                <td data-bind="text:TDS"></td>
                                                <td>
                                                    <button type="button" data-bind="click:$root.Select,actionVisibility:'7211'" class="btn btn-xs btn-default action" title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span> </button>
                                                    <button type="button" data-bind="click:$root.Delete,actionVisibility:'7212'" class="btn btn-xs btn-default action" title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade " id="allowance">
                            <br />
                            <div class="col-lg-12">
                                <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                                    <thead class="success bg-success">
                                        <tr>
                                            <th class="col-lg-1"> @T("SerialNo")</th>
                                            <th class="col-lg-2"> @T("Name") </th>
                                            <th class="col-lg-3"> @T("Value") </th>
                                            @*<th class="col-lg-2"> @T("AllowancePaidPer")</th>*@
                                            <th class="col-lg-1">@T("Period")</th>
                                            <th class="col-lg-1">@T("MinWorkHr")</th>
                                            <th class="col-lg-1">@T("From Date")</th>
                                            <th class="col-lg-1">@T("To Date")</th>
                                            <th class="col-lg-2">@T("Action")</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach:EmpAllowances">
                                        <tr>
                                            <td class="hidden"><input type="hidden" data-bind="value:Id" /></td>
                                            <td data-bind="serialNo:$index()+1"></td>
                                            <td data-bind="text:$root.GetAllowanceName(AllowanceId)"></td>
                                            <td data-bind="text:Value() +$root.GetAllowanceCalculatedName(AllowanceCalculatedBy,AllowancePaidPer)"></td>
                                            @*<td data-bind="text:$root.GetAllowancePaidPerName(AllowancePaidPer)"></td>*@
                                            <td data-bind="text:$root.GetAllowancePeriod(AllowancePeriod)"></td>
                                            <td data-bind="text:MinimumWorkingHour"></td>
                                            <td data-bind="text:SuitableDate(FromDate())"></td>
                                            <td data-bind="text:SuitableDate(ToDate())"></td>
                                            <td>
                                                <button type="button" data-bind="click:$root.SelectAllowance,actionVisibility:'7211'" class="btn btn-xs btn-default action" title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span> </button>
                                                <button type="button" data-bind="click:$root.DeleteAllowance,actionVisibility:'7212'" class="btn btn-xs btn-default action" title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot data-bind="with:Allowance">
                                        <tr>
                                            <td class="col-lg-1"></td>
                                            <td class="col-lg-2">
                                                <select class="form-control" required data-bind="options:$root.Allowances,
                                                                                                optionsText:'Name',optionsValue:'Id',optionsCaption:'Select',value:AllowanceId,event:{change:$root.GetAllowanceDetail}
                                                                                                "></select>
                                            </td>
                                            <td class="col-lg-3">
                                                <div class="input-group" data-bind="visible:!AllowanceCalculatedBy()">
                                                    <input type="text" class="form-control text-right" data-bind="value:Value,mask:'amount'">
                                                    <div class="input-group-btn">
                                                        <select class="dropdown-toggle form-control" style="width:100px" required data-bind="options:$root.AllowanceCalculatedByArr,
                                                                                                optionsText:'Name',optionsValue:'Id',value:AllowanceCalculatedBy
                                                                                                "></select>
                                                    </div>
                                                </div>
                                                <div class="input-group" data-bind="visible:AllowanceCalculatedBy">
                                                    <input type="text" class="form-control text-right" data-bind="value:Value,mask:'amount'">
                                                    <div class="input-group-btn">
                                                        <select class="dropdown-toggle form-control" style="width:100px" required data-bind="options:$root.AllowanceCalculatedByArr,
                                                                optionsText:'Name',optionsValue:'Id',value:AllowanceCalculatedBy
                                                                    "></select>
                                                    </div>
                                                    <div class="input-group-btn">
                                                        <select class="dropdown-toggle form-control" style="width:80px" required
                                                                data-bind="options:$root.AllowancePaidPerArr,optionsText:'Name', optionsValue:'Id',value:AllowancePaidPer"></select>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="col-lg-1">
                                                <select class="form-control" required
                                                        data-bind="options:$root.AllownacePeriodArr,optionsText:'Name',optionsValue:'Id', value:AllowancePeriod"></select>
                                            </td>
                                            <td class="col-lg-1"><input class="form-control" data-bind="value:MinimumWorkingHour" /></td>
                                            <td class="col-lg-1">
                                                <input type="text" class="form-control" data-nepdate="#effectedFromDate" data-bind="mask:'date',value:FromDate,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="FromDate" type="text" id="allowanceFromDate" data-bind="dateNp:{engDate:FromDate},visible:DateVisibility('ne')">
                                            </td>
                                            <td class="col-lg-1">
                                                <input type="text" class="form-control" data-nepdate="#effectedToDate" data-bind="mask:'date',value:ToDate,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="ToDate" type="text" id="allowanceToDate" data-bind="dateNp:{engDate:ToDate},visible:DateVisibility('ne')">
                                            </td>
                                            <td class="col-lg-2">
                                                <input type="submit" data-bind="click:$root.CreateUpdateAllowance,createUpdateText:$root.ModeOfButtonAllowance,actionVisibility:'7210'" name="Save" class="btn btn-success action" />
                                                <input type="button" data-bind="click:$root.ResetAllowance" name="Reset" value=@T("Reset") class="btn btn-default" />
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade " id="deduction">
                            <br />
                            <div class="col-lg-12">
                                <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                                    <thead class="success bg-success">
                                        <tr>
                                            <th class="col-lg-1"> @T("SerialNo")</th>
                                            <th class="col-lg-4"> @T("Name") </th>
                                            <th class="col-lg-3"> @T("Value") </th>

                                            <th class="col-lg-2"> @T("DeductionPaidPer")</th>

                                            <th class="col-lg-2">@T("Action")</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach:EmpDeductions">
                                        <tr>
                                            <td class="hidden"><input type="hidden" data-bind="value:Id" /></td>
                                            <td data-bind="serialNo:$index()+1"></td>
                                            <td data-bind="text:$root.GetDeductionName(DeductionId)"></td>
                                            <td data-bind="text:Value() +$root.GetDeductionCalculatedName(DeductionCalculatedBy)"></td>
                                            <td data-bind="text:$root.GetDeductionPaidPerName(DeductionPaidPer)"></td>
                                            <td>
                                                <button type="button" data-bind="click:$root.SelectDeduction,actionVisibility:'7211'" class="btn btn-xs btn-default action" title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span> </button>
                                                <button type="button" data-bind="click:$root.DeleteDeduction,actionVisibility:'7212'" class="btn btn-xs btn-default action" title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot data-bind="with:Deduction">
                                        <tr>
                                            <td></td>
                                            <td>
                                                <select class="form-control" required data-bind="options:$root.Deductions,
                                                                                                optionsText:'Name',optionsValue:'Id',optionsCaption:'Select',value:DeductionId,event:{change:$root.GetDeductionDetail}
                                                                                                "></select>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <input type="text" class="form-control text-right" data-bind="value:Value,mask:'amount'">
                                                    <div class="input-group-btn">
                                                        <select class="dropdown-toggle form-control" style="width:100px;" required data-bind="options:$root.DeductionCalculatedByArr,
                                                                                                optionsText:'Name',optionsValue:'Id',value:DeductionCalculatedBy
                                                                                                "></select>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <select class="form-control" required data-bind="options:$root.DeductionPaidPerArr,
                                                                                                optionsText:'Name',optionsValue:'Id',value:DeductionPaidPer
                                                                                                "></select>
                                            </td>
                                            <td>
                                                <input type="submit" data-bind="click:$root.CreateUpdateDeduction,createUpdateText:$root.ModeOfButtonDeduction,actionVisibility:'7210'" name="Save" class="btn btn-success action" />
                                                <input type="button" data-bind="click:$root.ResetDeduction" name="Reset" value=@T("Reset") class="btn btn-default" />
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade " id="insurance">
                            <br />
                            <div class="col-lg-12">
                                <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                                    <thead class="success bg-success">
                                        <tr>
                                            <th>S.N</th>
                                            <th>Insurance Company</th>
                                            <th>Policy No</th>
                                            <th>Policy Amount</th>
                                            <th>Premium Amount</th>
                                            <th>Issue Date</th>
                                            <th>Expiry Date</th>
                                            <th>Insurance Document</th>
                                            <th class="col-lg-2">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach:EmployeeInsuranceInfos">
                                        <tr>
                                            <td class="hidden"><input type="hidden" data-bind="value:Id" /></td>
                                            <td data-bind="serialNo:$index()+1"></td>
                                            <td data-bind="text:$root.GetInsuranceCompanyName(InsuranceCompanyId())"></td>
                                            <td data-bind="text:PolicyNo"></td>
                                            <td data-bind="text:PolicyAmount"></td>
                                            <td data-bind="text:PremiumAmount"></td>
                                            <td data-bind="text:SuitableDate(IssueDate())"></td>
                                            <td data-bind="text:SuitableDate(ExpiryDate())"></td>
                                            <td>
                                                <a data-bind="attr: {href: InsuraneDocument() || '/Images/logo-default.png'}" target="_blank"><img class="img-rounded " style="cursor:pointer" width="50" height="50" data-bind="attr: {src: InsuraneDocument() || '/Images/logo-default.png'}" /></a>
                                            </td>
                                            <td>
                                                <button type="button" data-bind="click:$root.EmpInsuranceInfoSelect" class="btn btn-xs btn-default" title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span></button>
                                                <button type="button" data-bind="click:$root.EmpInsuranceInfoDelete" class="btn btn-xs btn-default " title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr data-bind="with:EmployeeInsuranceInfo">
                                            <td></td>
                                            <td>

                                                <select class="dropdown-toggle form-control" required data-bind="options:$root.InsuranceCompanies,
                                                                                                optionsText:'Name',optionsValue:'Id',value:InsuranceCompanyId,optionsCaption:Riddha.UI.getOptionCaption()
                                                                                                "></select>

                                            </td>
                                            <td>
                                                <input type="text" class="form-control" required data-bind="value:PolicyNo" id="form-group-input " maxlength="30">
                                            <td>
                                                <input type="text" class="form-control text-right" data-bind="value:PolicyAmount,mask:'amount'">
                                            </td>
                                            <td>
                                                <input type="text" class="form-control text-right" data-bind="value:PremiumAmount,mask:'amount'">


                                            </td>
                                            <td>
                                                <input type="text" class="form-control" data-nepdate="#nepaliIssueDate" data-bind="mask:'date',value:IssueDate,visible:new Riddha.config().CurrentOperationDate=='en'">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="date" type="text" id="nepaliIssueDate" data-bind="dateNp:{engDate:IssueDate},visible:new Riddha.config().CurrentOperationDate=='ne'">


                                            </td>
                                            <td>
                                                <input type="text" class="form-control" data-nepdate="#nepaliExpiryDate" data-bind="mask:'date',value:ExpiryDate,visible:new Riddha.config().CurrentOperationDate=='en'">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="date" type="text" id="nepaliExpiryDate" data-bind="dateNp:{engDate:ExpiryDate},visible:new Riddha.config().CurrentOperationDate=='ne'">

                                            </td>
                                            <td>
                                                <label class="btn btn-success btn-file ">
                                                    @T("Choose File") <input data-bind="fileUpload: {value:InsuraneDocument,type:'image'}" type="file" value=" " class="btn btn-flat btn-file btn-success" hidden />
                                                </label>
                                            </td>
                                            <td>
                                                <input type="submit" data-bind="click:$root.EmpInsuranceInfoCreateUpdate,createUpdateText:$root.EmpInsuranceInfoModeOfButton" name="Save" class="btn btn-success btn-sm" />
                                                <input type="button" data-bind="click:$root.EmpInsuranceInfoReset" name="Reset" value=@T("Reset") class="btn btn-default btn-sm" />
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade " id="gradeGroup">
                            <div class="col-lg-12">
                                <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                                    <thead class="success bg-success">
                                        <tr>
                                            <th>#</th>
                                            <th>Grade</th>
                                            <th>Effected From</th>
                                            <th>Effected to</th>
                                            <th class="col-lg-3">Approved By</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach:EmpGrades">
                                        <tr>
                                            <td class="hidden"><input type="hidden" data-bind="value:Id" /></td>
                                            <td data-bind="serialNo:$index()+1"></td>
                                            <td data-bind="text:$root.GetGradeName(GradeGroupId)"></td>
                                            <td data-bind="text:SuitableDate(EffectedFrom())"></td>
                                            <td data-bind="text:SuitableDate(EffectedTo())"></td>
                                            <td data-bind="text:ApprovedBy"></td>
                                            <td>
                                                <button type="button" data-bind="click:$root.SelectGradeGroup,actionVisibility:'7211'" class="btn btn-xs btn-default action" title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span></button>
                                                <button type="button" data-bind="click:$root.DeleteGradeGroup,actionVisibility:'7212'" class="btn btn-xs btn-default action" title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr data-bind="with:EmpGradeUpgrade">
                                            <td></td>
                                            <td>
                                                <select class="form-control" required data-bind="options:$root.GradeGroups,
                                                                                                optionsText:'Name',optionsValue:'Id',optionsCaption:'Select',value:GradeGroupId"></select>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" data-nepdate="#effectedFromDate" data-bind="mask:'date',value:EffectedFrom,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedFrom" type="text" id="EffectedFromNepali" data-bind="dateNp:{engDate:EffectedFrom},visible:DateVisibility('ne')">
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" data-nepdate="#effectedToDate" data-bind="mask:'date',value:EffectedTo,visible:DateVisibility('en')">
                                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedTo" type="text" id="effectedToNepali" data-bind="dateNp:{engDate:EffectedTo},visible:DateVisibility('ne')">
                                            </td>
                                            <td></td>
                                            <td>
                                                <input type="submit" data-bind="click:$root.CreateUpdateGradeGroup,createUpdateText:$root.ModeOfButtonGradeGroup,actionVisibility:'7210'" name="Save" class="btn btn-success action" />
                                                <input type="button" data-bind="click:$root.ResetGradeGroups" name="Reset" value=@T("Reset") class="btn btn-default" />
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="gradeUpgradeModel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <header><h4 class="text-success"> @T("GradeUpgrade")</h4></header>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal" data-bind="with:EmpGradeUpgrade">
                        <div class="form-group col-lg-12">
                            <label class="col-lg-4 control-label" for="Number">@T("Grade")</label>
                            <div class="col-lg-8">
                                <select class="form-control" data-bind="options:$root.GradeGroups,optionsValue:'Id',optionsText:'Name',optionsCaption:Riddha.UI.getOptionCaption(),value:GradeGroupId"></select>
                            </div>
                        </div>
                        <div class="form-group col-lg-12">
                            <label class="col-lg-4 control-label" for="Number">@T("From")</label>
                            <div class="col-lg-8">
                                <input type="text" class="form-control" data-nepdate="#effectedFromDate" data-bind="mask:'date',value:EffectedFrom,visible:DateVisibility('en')">
                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedFrom" type="text" id="nepaliEffectedFromDate" data-bind="dateNp:{engDate:EffectedFrom},visible:DateVisibility('ne')">
                            </div>
                        </div>
                        <div class="form-group col-lg-12">
                            <label class="col-lg-4 control-label" for="Number">@T("To")</label>
                            <div class="col-lg-8">
                                <input type="text" class="form-control" data-nepdate="#effectedTo" data-bind="mask:'date',value:EffectedTo,visible:DateVisibility('en')">
                                <input class="form-control nepDate" data-format="yyyy/MM/dd" name="EffectedTo" type="text" id="nepaliEffectedToDate" data-bind="dateNp:{engDate:EffectedTo},visible:DateVisibility('ne')">
                            </div>
                        </div>
                        <div class="form-group col-lg-12">
                            <div class="col-lg-5"></div>
                            <div class="col-lg-7">
                                <input type="button" data-bind="click:$root.GradeUpgradeEmployee" class="btn btn-success" title="Save" value=@T("Upgrade")>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>


    <div class="modal" id="AdvanceSalaryCreationModal" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <header><h4 class="text-blue">@T("Advance Salary") @T("Creation")</h4></header>
                </div>
                <div class="modal-body">

                    <div class="col-lg-12">
                        <table class="table table-condensed table-bordered table-striped no-padding table-hover">
                            <thead class="success bg-success">
                                <tr>
                                    <th> @T("S.N")</th>
                                    <th> @T("Previous Due") </th>
                                    <th> @T("Request Amount") </th>
                                    <th>@T("Interest(%)")</th>
                                    <th> @T("Total Amount") </th>
                                    <th>@T("Installment")</th>
                                    <th>@T("Installment Amount")</th>
                                    <th>@T("Requested Date")</th>
                                    <th class="col-lg-2">@T("Action")</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach:EmpAdvanceSalarys">
                                <tr>
                                    <td class="hidden"><input type="hidden" data-bind="value:Id" /></td>
                                    <td data-bind="serialNo:$index()+1"></td>
                                    <td data-bind="text:PreviousDue"></td>
                                    <td data-bind="text:RequestAmount"></td>
                                    <td data-bind="text:Interest"></td>
                                    <td data-bind="text:TotalAmount"></td>
                                    <td data-bind="text:Installment"></td>
                                    <td data-bind="text:InstallmentAmount"></td>
                                    <td data-bind="text:SuitableDate(RequestedDate())"></td>
                                    <td>
                                        <button type="button" data-bind="click:$root.EmpAdvanceSalarySelect" class="btn btn-xs btn-default " title=@T("Edit")><span class="glyphicon glyphicon-pencil text-green "></span> </button>
                                        <button type="button" data-bind="click:$root.EmpAdvanceSalaryDelete" class="btn btn-xs btn-default " title=@T("Remove")><span class="glyphicon glyphicon-trash text-red"></span></button>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot data-bind="with:EmpAdvanceSalary">
                                <tr>
                                    <td></td>
                                    <td>

                                        <input type="text" class="form-control" required data-bind="value:PreviousDue ,mask:'amount'">
                                    </td>
                                    <td>


                                        <input type="text" class="form-control" required data-bind="value:RequestAmount ,mask:'amount'">
                                    </td>
                                    <td>


                                        <input type="text" class="form-control" required data-bind="value:Interest ,mask:'amount'">
                                    </td>
                                    <td>


                                        <input type="text" class="form-control" required data-bind="value:TotalAmount ,mask:'amount'" readonly>
                                    </td>
                                    <td>

                                        <input type="text" class="form-control" required data-bind="value:Installment ,mask:'amount'">
                                    </td>
                                    <td>

                                        <input type="text" class="form-control" required data-bind="value:InstallmentAmount ,mask:'amount'" readonly>
                                    </td>
                                    <td>

                                        <input type="text" class="form-control" data-nepdate="#nepaliRequestedDate" data-bind="mask:'date',value:RequestedDate,visible:new Riddha.config().CurrentOperationDate=='en'">
                                        <input class="form-control nepDate" data-format="yyyy/MM/dd" name="date" type="text" id="nepaliRequestedDate" data-bind="dateNp:{engDate:RequestedDate},visible:new Riddha.config().CurrentOperationDate=='ne'">
                                    </td>
                                    <td>
                                        <input type="submit" data-bind="click:$root.EmpAdvanceSalaryCreateUpdate,createUpdateText:$root.EmpAdvanceSalaryModeOfButton" name="Save" class="btn btn-primary" value=@T("Save") />
                                        <input type="button" data-bind="click:$root.EmpAdvanceSalaryReset" name="Reset" value=@T("Reset") class="btn btn-default" />
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    @*<div class="form-horizontal" data-bind="with:EmpAdvanceSalary">
                            <div class="form-group col-lg-12">
                                <div class="">
                                    <label class="col-lg-4 control-label" for="Number">@T("Previous Due")</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" required data-bind="value:PreviousDue ,mask:'amount'" id="form-group-input">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <div class="required">
                                    <label class="col-lg-4 control-label" for="Number">@T("Request Amount")</label>
                                    <div class="col-lg-6">

                                        <input type="text" class="form-control" required data-bind="value:RequestAmount ,mask:'amount'" id="form-group-input">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <div class="">
                                    <label class="col-lg-4 control-label" for="Number">@T("Interest(%)")</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" required data-bind="value:Interest ,mask:'amount'" id="form-group-input">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <div class="">
                                    <label class="col-lg-4 control-label" for="Number">@T("Installment")</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" required data-bind="value:Installment ,mask:'amount'" id="form-group-input">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <div class="">
                                    <label class="col-lg-4 control-label" for="Number">@T("Installment Amount")</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" required data-bind="value:InstallmentAmount ,mask:'amount'" id="form-group-input">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <div class="required">
                                    <label class="col-lg-4 control-label" for="Number">@T("Requested Date")</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" data-nepdate="#nepaliRequestedDate" data-bind="mask:'date',value:RequestedDate,visible:new Riddha.config().CurrentOperationDate=='en'">
                                        <input class="form-control nepDate" data-format="yyyy/MM/dd" name="date" type="text" id="nepaliRequestedDate" data-bind="dateNp:{engDate:RequestedDate},visible:new Riddha.config().CurrentOperationDate=='ne'">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12 text-center">
                                <input type="submit" data-bind="click:$root.EmpAdvanceSalaryCreateUpdate,createUpdateText:$root.EmpAdvanceSalaryModeOfButton" name="Save" class="btn btn-primary" value=@T("Save") />
                                <input type="button" data-bind="click:$root.EmpAdvanceSalaryReset" name="Reset" value=@T("Reset") class="btn btn-default" />
                                <input type="button" id="close" data-bind="click:$root.EmpAdvanceSalaryCloseModal" value=@T("Back") class="btn btn-default" />
                            </div>
                        </div>*@
                    <div class="modal-footer">
                        <div class="form-group col-lg-12 text-center">

                            <input type="button" id="close" data-bind="click:$root.EmpAdvanceSalaryCloseModal" value=@T("Back") class="btn btn-default" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="box box-success">
        <div class="box-header">
            <div class="">
                <div class="btn-group">
                    <button type="button" class="btn btn-default action" data-bind="click:ShowModal,actionVisibility:'7210'"><i class="fa fa-plus-square text-green">&nbsp;Create</i></button>
                    <button type="button" class="btn btn-default action" data-bind="click:ShowGradeUpgradeModel,actionVisibility:'7217'"><i class="fa fa-plus-square text-warning">&nbsp;Grade/Upgrade</i></button>
                    <button type="button" class="btn btn-default action" data-bind="click:EmpAdvanceSalaryShowModal,actionVisibility:'7246'"><i class="fa fa-money text-aqua">&nbsp;Advance Salary</i></button>
                </div>
            </div>
        </div>
        <div class="box-body">
            <div class="row">
                <div class="col-lg-12" data-bind="kendoGrid:KendoGridOptions">
                    <div id="empKendoGrid">

                    </div>
                </div>
            </div>

        </div>
    </div>
</section>
@if (Request.IsAjaxRequest())
{
    <script src="~/Areas/PayRoll/Scripts/Riddha.Script.PayRoll.Model.js"></script>
    <script src="~/Areas/Office/Scripts/Riddha.Script.Bank.Model.js"></script>
    <script src="~/Areas/PayRoll/Scripts/Riddha.Script.PayRoll.Controller.js"></script>
    <script src="~/Areas/PayRoll/Scripts/Riddha.Script.employeeinsuranceinfo.Model.js"></script>

    <script type="text/javascript">
        var obj = {};
        Riddha.global.permission.action('8003').done(function (data) {
            Riddha.global.permission.actions = data.Data;
            ko.cleanNode(document.getElementById("partial-render"));
            obj = new payRollController();

            ko.applyBindings(obj, document.getElementById("partial-render"));
        });
    </script>
}
else
{
    @section scripts
    {
        <script src="~/Areas/PayRoll/Scripts/Riddha.Script.PayRoll.Model.js"></script>
        <script src="~/Areas/Office/Scripts/Riddha.Script.Bank.Model.js"></script>
        <script src="~/Areas/PayRoll/Scripts/Riddha.Script.PayRoll.Controller.js"></script>
        <script src="~/Areas/PayRoll/Scripts/Riddha.Script.employeeinsuranceinfo.Model.js"></script>

        <script type="text/javascript">
            var obj = {};
            Riddha.global.permission.action('8003').done(function (data) {
                Riddha.global.permission.actions = data.Data;
                ko.cleanNode(document.getElementById("partial-render"));
                obj = new payRollController();

                ko.applyBindings(obj, document.getElementById("partial-render"));
            });
        </script>
    }
}


